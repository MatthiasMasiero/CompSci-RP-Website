<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Page</title>
    <link rel="stylesheet" href="teacher.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

    <!-- BUTTON TO SAVE TABLE DATA -->
    <button id="save">Save</button>

    

    <!-- EDITABLE TABLE -->
    <!-- has columns: Name, Period, Rewards Points, Actions -->
    <!-- the first row (column names) should not be editable -->
    <table id="table" contenteditable="true">
        <tr contenteditable="false">
            <th>Name</th>
            <th>Period</th>
            <th>Rewards Points</th>
            <th>Actions</th>
        </tr>
        <tr>
            <td contenteditable="false">John</td>
            <td contenteditable="false">1</td>
            <td>0</td>
            <td><button id="add" contenteditable="false">Add</button><button id="subtract" contenteditable="false">Subtract</button></td>
        </tr>
        <tr>
            <td contenteditable="false">Bob</td>
            <td contenteditable="false">2</td>
            <td>0</td>
            <td><button id="add" contenteditable="false">Add</button><button id="subtract" contenteditable="false">Subtract</button></td>
        </tr>
        <tr>
            <td contenteditable="false">Sam</td>
            <td contenteditable="false">3</td>
            <td>0</td>
            <td><button id="add" contenteditable="false">Add</button><button id="subtract" contenteditable="false">Subtract</button></td>
        </tr>
    </table>

    
    <!-- WHEN YOU CLICK THIS BUTTON, SCRIPT TO RETRIEVE THE TEXT FROM data.txt AND PRINT TO CONSOLE -->
    <!-- THE SCRIPT USES JQUERY -->
    <!-- <button id="btnGetText" onclick="getTxt()">Get Text</button> -->
    <div id="fText"></div>
    <script>
        $.get("data.csv", function(data) {
            // parse the data from data.csv into the html table
            var htmlTable = document.getElementById("table");
            var dataRows = data.split("\n");
            console.log(dataRows);
            var initialRows = htmlTable.rows.length;
            for (var i = 0; i < dataRows.length; i++) {
                var newRow = htmlTable.insertRow(i + initialRows);
                var insertRow = dataRows[i].split(",");
                for (var j = 0; j < insertRow.length; j++) {
                    var newCell = newRow.insertCell(j);
                    newCell.contenteditable = "false";
                    newCell.innerHTML = insertRow[j];
                }

                
                var buttons = newRow.insertCell(3);
                buttons.innerHTML = "<button id='add' contenteditable='false'>Add</button><button id='subtract' contenteditable='false'>Subtract</button>";
            }
        });


        var table = document.getElementById("table");
        var rows = table.rows
        for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            var cell = row.cells[3];
            var buttons = cell.getElementsByTagName("button");
            for (var j = 0; j < buttons.length; j++) {
                var button = buttons[j];
                button.onclick = function() {
                    var cell = this.parentNode.parentNode.cells[2];
                    var points = cell.innerHTML;
                    if (this.id == "add") {
                        points++;
                    } else {
                        points--;
                    }
                    cell.innerHTML = points;
                }
            }
        }
    </script>

</body>
</html>



